import Demo from "./demo";

<DemoCanvas>
  <DemoPreview>
    <Demo />
  </DemoPreview>
  <DemoCode>
    ```tsx file=./demo.tsx
    ```
  </DemoCode>
</DemoCanvas>

## インストール

```bash
pnpx shadcn@latest add https://ui.dninomiya.com/r/use-navigation-guard.json
```

## 使い方

```tsx
"use client";

import { useNavigationGuard } from "@/hooks/use-navigation-guard";
import { useForm } from "react-hook-form";

export default function FormPage() {
  const { formState: { isDirty } } = useForm();

  useNavigationGuard(isDirty);
  // ...
}
```

### 補足

- router.push や router.replace によるページ遷移時には警告表示されません。
- ブラウザのバックボタンやフォワードボタンで戻る場合の警告スタイルはカスタムできません。
- Safari ではブラウザバック時の警告は表示されません。

## 関連

- [公式のナビゲーションブロックガイド](https://nextjs.org/docs/app/api-reference/components/link#blocking-navigation)
- [next-navigation-guard](https://github.com/LayerXcom/next-navigation-guard)